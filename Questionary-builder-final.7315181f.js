!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},u={},n={},s=t.parcelRequired7c6;null==s&&((s=function(e){if(e in u)return u[e].exports;if(e in n){var t=n[e];delete n[e];var s={id:e,exports:{}};return u[e]=s,t.call(s.exports,s,s.exports),s.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},t.parcelRequired7c6=s),s.register;var a=s("hk4dl"),r=s("14lqv");function o(e){let t=Array.from(document.querySelectorAll(".test-card"));t.sort((t,u)=>{let n,s;switch(e){case"time":return n=new Date(t.getAttribute("data-created-at")).getTime(),(s=new Date(u.getAttribute("data-created-at")).getTime())-n;case"name":return n=t.querySelector("h2").textContent.toLowerCase(),s=u.querySelector("h2").textContent.toLowerCase(),n.localeCompare(s);case"questions":return n=parseInt(t.querySelector(".test-info").textContent.split(" ")[0]),(s=parseInt(u.querySelector(".test-info").textContent.split(" ")[0]))-n;case"completions":return n=parseInt(t.querySelector(".test-info").textContent.split(" ")[4]),(s=parseInt(u.querySelector(".test-info").textContent.split(" ")[4]))-n;default:return 0}});let u=document.querySelector(".test-list");u.innerHTML="",t.forEach(e=>u.appendChild(e))}var i=s("7ZMNl"),l=s("1NkZi");let c=async t=>{try{let{data:u,error:n}=await (0,i.supabase).from("test_attempts").select("id").eq("test_id",t);if(n)throw n;let s=u.map(e=>e.id);s.length>0&&(await (0,i.supabase).from("question_answers").delete().in("attempt_id",s),await (0,i.supabase).from("test_attempts").delete().eq("test_id",t));let{data:a,error:r}=await (0,i.supabase).from("questions").select("id").eq("test_id",t);if(r)throw r;let o=a.map(e=>e.id);o.length>0&&(await (0,i.supabase).from("answers").delete().in("question_id",o),await (0,i.supabase).from("questions").delete().eq("test_id",t)),await (0,i.supabase).from("tests").delete().eq("id",t),e(l).Notify.success("Тест был успешно удалён"),window.location.reload()}catch(t){e(l).Notify.failure(`\u{41E}\u{448}\u{438}\u{431}\u{43A}\u{430} \u{43F}\u{440}\u{438} \u{443}\u{434}\u{430}\u{43B}\u{435}\u{43D}\u{438}\u{438} \u{442}\u{435}\u{441}\u{442}\u{430}: ${t.message}`)}},d={testList:document.querySelector(".test-list"),target:document.querySelector(".js-guard")},f=1,p=!0,m=new IntersectionObserver(h,{root:document.querySelector("#scrollArea"),rootMargin:"200px",threshold:1});async function h(e){for(let t of e)if(t.isIntersecting&&p)try{let e=await (0,a.loadTests)(f,9);if(e.length<9){d.testList.insertAdjacentHTML("beforeend",g(e)),o(b.value),p=!1,w(),m.unobserve(d.target);return}d.testList.insertAdjacentHTML("beforeend",g(e)),f++,w(),o(b.value)}catch(e){console.error("Помилка завантаження тестів:",e)}}function v(e){e.stopPropagation(),document.querySelectorAll(".menu-container").forEach(e=>{e.classList.remove("active")}),e.target.parentElement.classList.toggle("active")}function w(){document.querySelectorAll(".menu-button").forEach(e=>{e.addEventListener("click",v)})}function g(e){return o(b.value),e.map(({id:e,title:t,description:u,count_questions:n,completed:s,created_at:a})=>` <li class="test-card" data-created-at="${a}">
            <div class="card-content-wrapper">
            <div class="test-header">
                <h2 class = "test-title">${t||`\u{422}\u{435}\u{441}\u{442} #${e}`}</h2>
                <div class="menu-container">
                    <button class="menu-button">\u{22EE}</button>
                    <div class="dropdown-menu">
                        <button class="edit"><a class = "start-link" href="/edit.html?test_id=${e}">\u{420}\u{435}\u{434}\u{430}\u{433}\u{443}\u{432}\u{430}\u{442}\u{438}</a></button>
                        <button class="delete"onClick="deleteTest(${e})">\u{412}\u{438}\u{434}\u{430}\u{43B}\u{438}\u{442}\u{438}</button>
                        <button class="continue"><a class = "start-link" href="/walkthrough.html?test_id=${e}">\u{41F}\u{440}\u{43E}\u{434}\u{43E}\u{432}\u{436}\u{438}\u{442}\u{438}</a></button>
                    </div>
                </div>
            </div>
            <p class = "test-description">${u}</p>
            <p class="test-info">${n} \u{43F}\u{438}\u{442}\u{430}\u{43D}\u{44C} \u{2022} \u{41F}\u{440}\u{43E}\u{439}\u{434}\u{435}\u{43D}\u{43E} ${s} \u{440}\u{430}\u{437}\u{456}\u{432}</p>
            <p>${(0,r.timeSince)(a)}</p>
            </div>
            <div class="test-actions">
                <a class="start" href="/walkthrough.html?test_id=${e}">\u{417}\u{430}\u{43F}\u{443}\u{441}\u{442}\u{438}\u{442}\u{438}</a>
            </div>
        </li>`).join("")}document.addEventListener("click",function(e){e.target.closest(".menu-container")||document.querySelectorAll(".menu-container").forEach(e=>{e.classList.remove("active")})}),document.addEventListener("DOMContentLoaded",async function(){let e=await (0,a.loadTests)(f,9);d.testList.insertAdjacentHTML("beforeend",g(e)),m.observe(d.target),w(),f++});let b=document.getElementById("sort-type");b.addEventListener("change",e=>{o(e.target.value),o()}),window.deleteTest=c}();
//# sourceMappingURL=Questionary-builder-final.7315181f.js.map
