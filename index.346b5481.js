!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},u={},n={},r=t.parcelRequire94c2;null==r&&((r=function(e){if(e in u)return u[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return u[e]=r,t.call(r.exports,r,r.exports),r.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},t.parcelRequire94c2=r),r.register;var s=r("hk4dl"),o=r("14lqv");function a(e){let t=Array.from(document.querySelectorAll(".test-card"));t.sort((t,u)=>{let n,r;switch(e){case"time":return n=new Date(t.getAttribute("data-created-at")).getTime(),(r=new Date(u.getAttribute("data-created-at")).getTime())-n;case"name":return n=t.querySelector("h2").textContent.toLowerCase(),r=u.querySelector("h2").textContent.toLowerCase(),n.localeCompare(r);case"questions":return n=parseInt(t.querySelector(".test-info").textContent.split(" ")[0]),(r=parseInt(u.querySelector(".test-info").textContent.split(" ")[0]))-n;case"completions":return n=parseInt(t.querySelector(".test-info").textContent.split(" ")[4]),(r=parseInt(u.querySelector(".test-info").textContent.split(" ")[4]))-n;default:return 0}});let u=document.querySelector(".test-list");u.innerHTML="",t.forEach(e=>u.appendChild(e))}var i=r("7ZMNl"),l=r("1NkZi");let c=async t=>{try{let{data:u,error:n}=await (0,i.supabase).from("questions").select("id").eq("test_id",t);if(n)throw n;let r=u.map(e=>e.id);r.length>0&&(await (0,i.supabase).from("answers").delete().in("question_id",r),await (0,i.supabase).from("questions").delete().eq("test_id",t)),await (0,i.supabase).from("tests").delete().eq("id",t),e(l).Notify.success("Тест був успішно видалений"),location.reload()}catch(t){e(l).Notify.failure(`\u{412}\u{438}\u{431}\u{430}\u{447}\u{442}\u{435}, \u{441}\u{442}\u{430}\u{43B}\u{430}\u{441}\u{44F} \u{43D}\u{435}\u{43F}\u{435}\u{440}\u{435}\u{434}\u{431}\u{430}\u{447}\u{443}\u{432}\u{430}\u{43D}\u{430} \u{43F}\u{43E}\u{43C}\u{438}\u{43B}\u{43A}\u{430} ${t}`)}},d={testList:document.querySelector(".test-list"),target:document.querySelector(".js-guard")},f=1,p=!0,m=new IntersectionObserver(h,{root:document.querySelector("#scrollArea"),rootMargin:"200px",threshold:1});async function h(e){for(let t of e)if(t.isIntersecting&&p)try{let e=await (0,s.loadTests)(f,9);if(e.length<9){d.testList.insertAdjacentHTML("beforeend",g(e)),a(b.value),p=!1,y(),m.unobserve(d.target);return}d.testList.insertAdjacentHTML("beforeend",g(e)),f++,y(),a(b.value)}catch(e){console.error("Помилка завантаження тестів:",e)}}function v(e){e.stopPropagation(),document.querySelectorAll(".menu-container").forEach(e=>{e.classList.remove("active")}),e.target.parentElement.classList.toggle("active")}function y(){document.querySelectorAll(".menu-button").forEach(e=>{e.addEventListener("click",v)})}function g(e){return a(b.value),e.map(({id:e,title:t,description:u,count_questions:n,completed:r,created_at:s})=>` <li class="test-card" data-created-at="${s}">
            <div class="card-content-wrapper">
            <div class="test-header">
                <h2 class = "test-title">${t||`\u{422}\u{435}\u{441}\u{442} #${e}`}</h2>
                <div class="menu-container">
                    <button class="menu-button">\u{22EE}</button>
                    <div class="dropdown-menu">
                        <button class="edit"><a class = "start-link" href="/questionary-builder.html">\u{420}\u{435}\u{434}\u{430}\u{433}\u{443}\u{432}\u{430}\u{442}\u{438}</a></button>
                        <button class="delete"onClick="deleteTest(${e})">\u{412}\u{438}\u{434}\u{430}\u{43B}\u{438}\u{442}\u{438}</button>
                        <button class="continue"><a class = "start-link" href="/walkthrough.html?test_id=${e}">\u{41F}\u{440}\u{43E}\u{434}\u{43E}\u{432}\u{436}\u{438}\u{442}\u{438}</a></button>
                    </div>
                </div>
            </div>
            <p class = "test-description">${u}</p>
            <p class="test-info">${n} \u{43F}\u{438}\u{442}\u{430}\u{43D}\u{44C} \u{2022} \u{41F}\u{440}\u{43E}\u{439}\u{434}\u{435}\u{43D}\u{43E} ${r} \u{440}\u{430}\u{437}\u{456}\u{432}</p>
            <p>${(0,o.timeSince)(s)}</p>
            </div>
            <div class="test-actions">
                <a class="start" href="/walkthrough.html?test_id=${e}">\u{417}\u{430}\u{43F}\u{443}\u{441}\u{442}\u{438}\u{442}\u{438}</a>
            </div>
        </li>`).join("")}document.addEventListener("click",function(e){e.target.closest(".menu-container")||document.querySelectorAll(".menu-container").forEach(e=>{e.classList.remove("active")})}),document.addEventListener("DOMContentLoaded",async function(){let e=await (0,s.loadTests)(f,9);d.testList.insertAdjacentHTML("beforeend",g(e)),m.observe(d.target),y(),f++});let b=document.getElementById("sort-type");b.addEventListener("change",e=>{a(e.target.value),a()}),window.deleteTest=c}();
//# sourceMappingURL=index.346b5481.js.map
