{"mappings":"C,A,W,S,E,C,C,C,C,C,C,C,E,O,c,C,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,I,E,E,Q,C,E,Q,S,C,C,C,E,E,E,O,C,yB,W,O,C,G,I,E,E,SCEO,IAAM,EAAyB,MAAM,IAC1C,GAAM,CAAA,KAAE,CAAI,CAAA,MAAE,CAAK,CAAE,CAAG,MAAM,AAAA,CAAA,EAAA,EAAA,QAAO,AAAP,EAC3B,IAAI,CAAC,WACL,MAAM,CAAC,oCACP,EAAE,CAAC,cAAe,GAErB,GAAI,EACF,MAAM,AAAI,MAAM,EAAM,OAAO,EAG/B,OAAO,CACT,C,G,E,Q,S,C,C,C,E,E,E,O,C,sB,W,O,C,G,I,E,E,SCXO,IAAM,EAAsB,MAAM,IACvC,GAAM,CAAA,KAAE,CAAI,CAAA,MAAE,CAAK,CAAE,CAAG,MAAM,AAAA,CAAA,EAAA,EAAA,QAAO,AAAP,EAC3B,IAAI,CAAC,aACL,MAAM,CAAC,KACP,EAAE,CAAC,UAAW,GAEjB,GAAI,EACF,MAAM,AAAI,MAAM,EAAM,OAAO,EAG/B,OAAO,CACT,C,G,I,E,E,SEXO,IAAM,EAAc,MAAM,IAC/B,GAAI,CACF,GAAM,CAAA,KAAE,CAAI,CAAA,MAAE,CAAK,CAAE,CAAG,MAAM,AAAA,CAAA,EAAA,EAAA,QAAO,AAAP,EAC3B,IAAI,CAAC,SACL,MAAM,CAAC,KACP,EAAE,CAAC,KAAM,GAEZ,GAAI,EACF,MAAM,AAAI,MAAM,EAAM,OAAO,EAG/B,OAAO,CAAI,CAAC,EAAE,AAChB,CAAE,MAAO,EAAO,CACd,OAAO,CACT,CACF,E,I,E,E,S,E,E,SCoEO,SAAS,IACd,SAAS,gBAAgB,CAAC,aAAa,OAAO,CAAC,CAAC,EAAU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","sources":["<anon>","funcs/loadAnswersToQuestions.js","funcs/loadQuestionsToTest.js","src/edit.js","funcs/getTestById.js","funcs/manageTests.js"],"sourcesContent":["(function () {\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global =\n        typeof globalThis !== 'undefined'\n          ? globalThis\n          : typeof self !== 'undefined'\n          ? self\n          : typeof window !== 'undefined'\n          ? window\n          : typeof global !== 'undefined'\n          ? global\n          : {};\n  \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequired7c6\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequired7c6\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"gVbgG\", function(module, exports) {\n\n$parcel$export(module.exports, \"loadAnswersToQuestions\", function () { return $c51ab5d54aaa30b2$export$7a30e8c3b909984b; });\n\nvar $7ZMNl = parcelRequire(\"7ZMNl\");\nconst $c51ab5d54aaa30b2$export$7a30e8c3b909984b = async (id)=>{\n    const { data: data, error: error } = await (0, $7ZMNl.supabase).from('answers').select('question_id,answer, id, is_right').eq('question_id', id);\n    if (error) throw new Error(error.message);\n    return data;\n};\n\n});\n\nparcelRegister(\"9oxol\", function(module, exports) {\n\n$parcel$export(module.exports, \"loadQuestionsToTest\", function () { return $6d7041d98d88f3fe$export$de5889d48e25167b; });\n\nvar $7ZMNl = parcelRequire(\"7ZMNl\");\nconst $6d7041d98d88f3fe$export$de5889d48e25167b = async (id)=>{\n    const { data: data, error: error } = await (0, $7ZMNl.supabase).from('questions').select('*').eq('test_id', id);\n    if (error) throw new Error(error.message);\n    return data;\n};\n\n});\n\n\nvar $7ZMNl = parcelRequire(\"7ZMNl\");\nconst $e35179d877a16811$export$4d7fb8ef9268b219 = async (id)=>{\n    try {\n        const { data: data, error: error } = await (0, $7ZMNl.supabase).from('tests').select('*').eq('id', id);\n        if (error) throw new Error(error.message);\n        return data[0];\n    } catch (error) {\n        return error;\n    }\n};\n\n\n\nvar $gVbgG = parcelRequire(\"gVbgG\");\n\nvar $9oxol = parcelRequire(\"9oxol\");\nfunction $7aff64ef5e188ba8$export$d65c55ff4ffe089f(questionId) {\n    const container = document.getElementById(questionId);\n    const fileInput = container.querySelector('input[type=\"file\"]');\n    if (fileInput) fileInput.value = null;\n    const imagePreview = container.querySelector('.image-preview');\n    if (imagePreview) imagePreview.innerHTML = '';\n}\nfunction $7aff64ef5e188ba8$export$7a6edd6200baeed7(questionId) {\n    const answersDiv = document.getElementById(`${questionId}-answers`);\n    const questionElement = document.getElementById(questionId);\n    if (!questionElement) return;\n    const questionType = questionElement.querySelector('select').value;\n    if (questionType === 'text') {\n        if (answersDiv.children.length === 0) {\n            const input = document.createElement('input');\n            input.type = 'text';\n            input.name = `text-answer`;\n            input.placeholder = \"\\u041F\\u0440\\u0430\\u0432\\u0438\\u043B\\u044C\\u043D\\u0430 \\u0432\\u0456\\u0434\\u043F\\u043E\\u0432\\u0456\\u0434\\u044C\";\n            answersDiv.appendChild(input);\n        }\n        return;\n    }\n    const answerDiv = document.createElement('div');\n    answerDiv.classList.add('answer');\n    let inputType = questionType === 'single' ? 'radio' : 'checkbox';\n    answerDiv.innerHTML = `\n      <label>\n          <input type=\"text\" name=\"answer\" class=\"answer-input\" placeholder=\"\\u{412}\\u{430}\\u{440}\\u{456}\\u{430}\\u{43D}\\u{442}\">\n          <input type=\"${inputType}\" class=\"correct-answer\" name=\"correct-${questionId}\">\n          <span>\\u{41F}\\u{440}\\u{430}\\u{432}\\u{438}\\u{43B}\\u{44C}\\u{43D}\\u{430} \\u{432}\\u{456}\\u{434}\\u{43F}\\u{43E}\\u{432}\\u{456}\\u{434}\\u{44C}</span>\n      </label>\n      <button class=\"remove-question\" onclick=\"this.parentElement.remove()\">\\u{412}\\u{438}\\u{434}\\u{430}\\u{43B}\\u{438}\\u{442}\\u{438}</button>\n  `;\n    answersDiv.appendChild(answerDiv);\n}\nfunction $7aff64ef5e188ba8$export$81aad1c65584953f(questionId, selectElement) {\n    const answersDiv = document.getElementById(`${questionId}-answers`);\n    answersDiv.innerHTML = '';\n}\nfunction $7aff64ef5e188ba8$export$f883456a56996078(id) {\n    const element = document.getElementById(id);\n    if (element) {\n        element.remove();\n        questionCount--;\n        $7aff64ef5e188ba8$export$25cf296777a7483d();\n    }\n}\nfunction $7aff64ef5e188ba8$export$b5db251096956c0d(event, questionId) {\n    const file = event.target.files[0];\n    if (file) {\n        const reader = new FileReader();\n        reader.onload = function(e) {\n            const previewContainer = document.getElementById(`${questionId}-image-preview`);\n            previewContainer.innerHTML = `\n            <div class=\"image-wrapper\">\n              <img src=\"${e.target.result}\" alt=\"\\u{417}\\u{43E}\\u{431}\\u{440}\\u{430}\\u{436}\\u{435}\\u{43D}\\u{43D}\\u{44F}\">\n              <button class=\"delete-image\" onclick=\"removeImage('${questionId}')\">\\xd7</button>\n            </div>\n          `;\n        };\n        reader.readAsDataURL(file);\n    }\n}\nfunction $7aff64ef5e188ba8$export$25cf296777a7483d() {\n    document.querySelectorAll('.question').forEach((question, index)=>{\n        const newId = `question-${index + 1}`;\n        question.setAttribute('id', newId);\n        question.querySelector('.question-title').innerText = `\\u{41F}\\u{438}\\u{442}\\u{430}\\u{43D}\\u{43D}\\u{44F} ${index + 1}:`;\n        const select = question.querySelector('select');\n        select.setAttribute('onchange', `updateAnswerType('${newId}', this)`);\n        const answerDiv = question.querySelector('.answers');\n        answerDiv.setAttribute('id', `${newId}-answers`);\n        const addAnswerBtn = question.querySelector('.add-answer');\n        addAnswerBtn.setAttribute('onclick', `addAnswer('${newId}')`);\n        const deleteBtn = question.querySelector('button[onclick^=\"removeElement\"]');\n        deleteBtn.setAttribute('onclick', `removeElement('${newId}')`);\n        question.querySelectorAll('.correct-answer').forEach((input)=>{\n            input.name = `correct-${newId}`;\n        });\n    });\n}\nlet $7aff64ef5e188ba8$export$6aa807c2160bede3 = null;\nfunction $7aff64ef5e188ba8$export$c34730c351bf3a09(event) {\n    $7aff64ef5e188ba8$export$6aa807c2160bede3 = event.target;\n    originalPosition = $7aff64ef5e188ba8$export$6aa807c2160bede3.nextSibling;\n    event.target.classList.add('dragging');\n}\nfunction $7aff64ef5e188ba8$export$d135ba0f748ea966(event) {\n    event.preventDefault();\n    const target = event.target.closest('.question');\n    const container = document.getElementById('questions-container');\n    if (target && target !== $7aff64ef5e188ba8$export$6aa807c2160bede3 && container.contains(target)) {\n        const children = Array.from(container.children);\n        const draggedIndex = children.indexOf($7aff64ef5e188ba8$export$6aa807c2160bede3);\n        const targetIndex = children.indexOf(target);\n        if (draggedIndex > targetIndex) container.insertBefore($7aff64ef5e188ba8$export$6aa807c2160bede3, target);\n        else container.insertBefore($7aff64ef5e188ba8$export$6aa807c2160bede3, target.nextSibling);\n    }\n}\nfunction $7aff64ef5e188ba8$export$663103110d94aac9(event) {\n    event.preventDefault();\n    $7aff64ef5e188ba8$export$6aa807c2160bede3.classList.remove('dragging');\n}\nfunction $7aff64ef5e188ba8$export$36a4333af4a247f5(event) {\n    event.target.closest('.question')?.classList.remove('drag-over');\n}\nfunction $7aff64ef5e188ba8$export$5d38b0bd4bef40ba() {\n    const container = document.getElementById('questions-container');\n    if (!container.contains($7aff64ef5e188ba8$export$6aa807c2160bede3)) originalPosition ? originalPosition.parentNode.insertBefore($7aff64ef5e188ba8$export$6aa807c2160bede3, originalPosition) : container.appendChild($7aff64ef5e188ba8$export$6aa807c2160bede3);\n    $7aff64ef5e188ba8$export$6aa807c2160bede3.classList.remove('dragging');\n    $7aff64ef5e188ba8$export$6aa807c2160bede3 = null;\n    $7aff64ef5e188ba8$export$25cf296777a7483d();\n}\n\n\nwindow.removeImage = (0, $7aff64ef5e188ba8$export$d65c55ff4ffe089f);\nwindow.addAnswer = (0, $7aff64ef5e188ba8$export$7a6edd6200baeed7);\nwindow.updateAnswerType = (0, $7aff64ef5e188ba8$export$81aad1c65584953f);\nwindow.previewImage = (0, $7aff64ef5e188ba8$export$b5db251096956c0d);\nwindow.updateQuestionNumbers = (0, $7aff64ef5e188ba8$export$25cf296777a7483d);\nwindow.dragEnd = (0, $7aff64ef5e188ba8$export$5d38b0bd4bef40ba);\nwindow.dragLeave = (0, $7aff64ef5e188ba8$export$36a4333af4a247f5);\nwindow.dragOver = (0, $7aff64ef5e188ba8$export$d135ba0f748ea966);\nwindow.dragStart = (0, $7aff64ef5e188ba8$export$c34730c351bf3a09);\nwindow.drop = (0, $7aff64ef5e188ba8$export$663103110d94aac9);\nwindow.draggedItem = (0, $7aff64ef5e188ba8$export$6aa807c2160bede3);\n(async ()=>{\n    const params = new URLSearchParams(document.location.search);\n    const id = params.get('test_id');\n    const test = await (0, $e35179d877a16811$export$4d7fb8ef9268b219)(id);\n    if (!test) {\n        document.title = \"\\u041D\\u0456\\u0447\\u043E\\u0433\\u043E \\u043D\\u0435 \\u0437\\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\";\n        document.querySelector('.container').innerHTML = `\n      <div>\n        <a class=\"rollback\" href=\"/\">\\u{41F}\\u{43E}\\u{432}\\u{435}\\u{440}\\u{43D}\\u{443}\\u{442}\\u{438}\\u{441}\\u{44F} \\u{43D}\\u{430}\\u{437}\\u{430}\\u{434}</a>\n        <h1>\\u{41D}\\u{430} \\u{436}\\u{430}\\u{43B}\\u{44C} \\u{442}\\u{430}\\u{43A}\\u{43E}\\u{433}\\u{43E} \\u{442}\\u{435}\\u{441}\\u{442}\\u{443} \\u{449}\\u{435} \\u{43D}\\u{435} \\u{456}\\u{441}\\u{43D}\\u{443}\\u{454} \\u{1F437}</h1>\n      </div>\n    `;\n        return;\n    }\n    const questions = await (0, $9oxol.loadQuestionsToTest)(id);\n    if (!questions) {\n        document.title = \"\\u041D\\u0435\\u043F\\u0435\\u0440\\u0435\\u0434\\u0431\\u0430\\u0447\\u0435\\u043D\\u0430 \\u043F\\u043E\\u043C\\u0438\\u043B\\u043A\\u0430\";\n        document.querySelector('.container').innerHTML = `\n      <div>\n        <a class=\"rollback\" href=\"/\">\\u{41F}\\u{43E}\\u{432}\\u{435}\\u{440}\\u{43D}\\u{443}\\u{442}\\u{438}\\u{441}\\u{44F} \\u{43D}\\u{430}\\u{437}\\u{430}\\u{434}</a>\n        <h1>\\u{414}\\u{43E} \\u{446}\\u{44C}\\u{43E}\\u{433}\\u{43E} \\u{442}\\u{435}\\u{441}\\u{442}\\u{443} \\u{43D}\\u{435} \\u{431}\\u{443}\\u{43B}\\u{43E} \\u{437}\\u{43D}\\u{430}\\u{439}\\u{434}\\u{435}\\u{43D}\\u{43E} \\u{434}\\u{430}\\u{43D}\\u{43D}\\u{438}\\u{445}, \\u{441}\\u{43F}\\u{440}\\u{43E}\\u{431}\\u{443}\\u{439}\\u{442}\\u{435} \\u{43F}\\u{456}\\u{437}\\u{43D}\\u{456}\\u{448}\\u{435} \\u{1F437}</h1>\n      </div>\n    `;\n    }\n    const answers = await Promise.all(questions.map(async (question)=>await (0, $gVbgG.loadAnswersToQuestions)(question.id)));\n    let questionCount = questions.length;\n    window.removeElement = function removeElement(id) {\n        const element = document.getElementById(id);\n        if (element) {\n            element.remove();\n            questionCount--;\n            (0, $7aff64ef5e188ba8$export$25cf296777a7483d)();\n        }\n    };\n    window.removeImage = function removeImage(questionId) {\n        const container = document.getElementById(questionId);\n        console.log(questionId);\n        const fileInput = container.querySelector(`input[type=\"file\"]`);\n        if (fileInput) fileInput.value = null;\n        const imagePreview = container.querySelector(`.image-preview`);\n        if (imagePreview) imagePreview.innerHTML = '';\n    };\n    function addQuestion() {\n        questionCount++;\n        let questionId = `question-${questionCount}`;\n        const questionDiv = document.createElement('div');\n        questionDiv.classList.add('question');\n        questionDiv.setAttribute('id', questionId);\n        questionDiv.setAttribute('draggable', true);\n        questionDiv.innerHTML = `\n            <div class=\"question-header\">\n                <span class=\"drag-handle\">\\u{2630}</span>\n                <label><span class=\"question-title\">\\u{41F}\\u{438}\\u{442}\\u{430}\\u{43D}\\u{43D}\\u{44F} ${questionCount}:</span> \n                    <input type=\"text\" id=\"question-title\" name=\"question\" placeholder=\"\\u{412}\\u{432}\\u{435}\\u{434}\\u{456}\\u{442}\\u{44C} \\u{43F}\\u{438}\\u{442}\\u{430}\\u{43D}\\u{43D}\\u{44F}\">\n                </label>\n                <label>\\u{422}\\u{438}\\u{43F}: \n                    <select id=\"question-type\" onchange=\"updateAnswerType('${questionId}', this)\">\n                        <option value=\"text\">\\u{422}\\u{435}\\u{43A}\\u{441}\\u{442}</option>\n                        <option value=\"single\">\\u{41E}\\u{434}\\u{438}\\u{43D} \\u{432}\\u{430}\\u{440}\\u{456}\\u{430}\\u{43D}\\u{442}</option>\n                        <option value=\"multiple\">\\u{41A}\\u{456}\\u{43B}\\u{44C}\\u{43A}\\u{430} \\u{432}\\u{430}\\u{440}\\u{456}\\u{430}\\u{43D}\\u{442}\\u{456}\\u{432}</option>\n                    </select>\n                </label>\n                <button onclick=\"removeElement('${questionId}')\">\\u{412}\\u{438}\\u{434}\\u{430}\\u{43B}\\u{438}\\u{442}\\u{438}</button>\n            </div>\n    \n            <div class=\"image-upload\">\n                <input type=\"file\" accept=\"image/*\" onchange=\"previewImage(event, '${questionId}')\">\n                <div class=\"image-preview\" id=\"${questionId}-image-preview\"></div>\n            </div>\n    \n            <div class=\"answers\" id=\"${questionId}-answers\"></div>\n            <button class=\"add-answer\" onclick=\"addAnswer('${questionId}')\">\\u{414}\\u{43E}\\u{434}\\u{430}\\u{442}\\u{438} \\u{432}\\u{456}\\u{434}\\u{43F}\\u{43E}\\u{432}\\u{456}\\u{434}\\u{44C}</button> \n        `;\n        document.getElementById('questions-container').appendChild(questionDiv);\n        questionDiv.addEventListener('dragstart', (0, $7aff64ef5e188ba8$export$c34730c351bf3a09));\n        questionDiv.addEventListener('dragover', (0, $7aff64ef5e188ba8$export$d135ba0f748ea966));\n        questionDiv.addEventListener('drop', (0, $7aff64ef5e188ba8$export$663103110d94aac9));\n        questionDiv.addEventListener('dragleave', (0, $7aff64ef5e188ba8$export$36a4333af4a247f5));\n        questionDiv.addEventListener('dragend', (0, $7aff64ef5e188ba8$export$5d38b0bd4bef40ba));\n    }\n    const initEdit = async ()=>{\n        document.title = `\\u{420}\\u{435}\\u{434}\\u{430}\\u{433}\\u{443}\\u{432}\\u{430}\\u{43D}\\u{43D}\\u{44F} - ${test.title}`;\n        document.querySelector('.container').innerHTML = `\n      <a class=\"rollback\" href=\"/\">\\u{41D}\\u{430} \\u{433}\\u{43E}\\u{43B}\\u{43E}\\u{432}\\u{43D}\\u{443}</a>\n      <div class=\"quiz-container\">\n        <h2>\\u{420}\\u{435}\\u{434}\\u{430}\\u{433}\\u{443}\\u{432}\\u{430}\\u{442}\\u{438} \\u{442}\\u{435}\\u{441}\\u{442} - ${test.title}</h2>\n        <div class=\"test-content\">\n          <label\n            >\\u{41D}\\u{430}\\u{437}\\u{432}\\u{430} \\u{442}\\u{435}\\u{441}\\u{442}\\u{443}:\n            <input\n              required\n              type=\"text\"\n              id=\"test-title\"\n              placeholder=\"\\u{412}\\u{432}\\u{435}\\u{434}\\u{456}\\u{442}\\u{44C} \\u{43D}\\u{430}\\u{437}\\u{432}\\u{443} \\u{442}\\u{435}\\u{441}\\u{442}\\u{443}\"\n              value=\"${test.title}\"\n            />\n          </label>\n          <label\n            >\\u{41E}\\u{43F}\\u{438}\\u{441} \\u{442}\\u{435}\\u{441}\\u{442}\\u{443}:\n            <textarea\n              id=\"test-description\"\n              placeholder=\"\\u{412}\\u{432}\\u{435}\\u{434}\\u{456}\\u{442}\\u{44C} \\u{43E}\\u{43F}\\u{438}\\u{441} \\u{442}\\u{435}\\u{441}\\u{442}\\u{443}\"\n            >${test.description}</textarea>\n          </label>\n        </div>\n        <div id=\"questions-container\"></div>\n        <div id=\"button-wrapper\">\n          <button class=\"add-question\" id=\"add-question-btn\">\n            \\u{414}\\u{43E}\\u{434}\\u{430}\\u{442}\\u{438} \\u{43F}\\u{438}\\u{442}\\u{430}\\u{43D}\\u{43D}\\u{44F}\n          </button>\n          <button class=\"make-test\" id=\"add-test-btn\">\\u{41E}\\u{43D}\\u{43E}\\u{432}\\u{438}\\u{442}\\u{438} \\u{442}\\u{435}\\u{441}\\u{442}</button>\n        </div>\n      </div>\n  `;\n        questions.map((question, index)=>{\n            const questionDiv = document.createElement('div');\n            let questionId = `question-${index + 1}`;\n            questionDiv.classList.add('question');\n            questionDiv.dataset.id = question.id;\n            questionDiv.setAttribute('id', `${questionId}`);\n            questionDiv.setAttribute('draggable', true);\n            questionDiv.innerHTML = `\n      <div class=\"question-header\">\n              <span class=\"drag-handle\">\\u{2630}</span>\n              <label><span class=\"question-title\">\\u{41F}\\u{438}\\u{442}\\u{430}\\u{43D}\\u{43D}\\u{44F} ${index + 1}:</span> \n                  <input type=\"text\" id=\"question-title\" name=\"question\" value=\"${question.question}\" placeholder=\"\\u{412}\\u{432}\\u{435}\\u{434}\\u{456}\\u{442}\\u{44C} \\u{43F}\\u{438}\\u{442}\\u{430}\\u{43D}\\u{43D}\\u{44F}\">\n              </label>\n              <label>\\u{422}\\u{438}\\u{43F}: \n                  <select id=\"question-type\" onchange=\"updateAnswerType('${questionId}', this)\">\n                      <option value=\"text\" ${question.type === 'text' ? 'selected' : ''}>\\u{422}\\u{435}\\u{43A}\\u{441}\\u{442}</option>\n                      <option value=\"single\" ${question.type === 'single' ? 'selected' : ''}>\\u{41E}\\u{434}\\u{438}\\u{43D} \\u{432}\\u{430}\\u{440}\\u{456}\\u{430}\\u{43D}\\u{442}</option>\n                      <option value=\"multiple\" ${question.type === 'multiple' ? 'selected' : ''}>\\u{41A}\\u{456}\\u{43B}\\u{44C}\\u{43A}\\u{430} \\u{432}\\u{430}\\u{440}\\u{456}\\u{430}\\u{43D}\\u{442}\\u{456}\\u{432}</option>\n                  </select>\n              </label>\n              <button onclick=\"removeElement('${questionId}')\">\\u{412}\\u{438}\\u{434}\\u{430}\\u{43B}\\u{438}\\u{442}\\u{438}</button>\n          </div>\n  \n          <div class=\"image-upload\">\n              <input type=\"file\" accept=\"image/*\" onchange=\"previewImage(event, '${questionId}')\">\n              <div class=\"image-preview\" id=\"${questionId}-image-preview\">\n                ${question.image_url ? `<div class=\"image-wrapper\">\n              <img src=\"${question.image_url}\">\n              <button class=\"delete-image\" onclick=\"removeImage('${questionId}')\">\\xd7</button>\n            </div>` : ''}\n              </div>\n          </div>\n  \n          <div class=\"answers\" id=\"${questionId}-answers\"></div>\n          <button class=\"add-answer\" onclick=\"addAnswer('${questionId}')\">\\u{414}\\u{43E}\\u{434}\\u{430}\\u{442}\\u{438} \\u{432}\\u{456}\\u{434}\\u{43F}\\u{43E}\\u{432}\\u{456}\\u{434}\\u{44C}</button>\n    `;\n            document.getElementById('questions-container').appendChild(questionDiv);\n            questionDiv.addEventListener('dragstart', (0, $7aff64ef5e188ba8$export$c34730c351bf3a09));\n            questionDiv.addEventListener('dragover', (0, $7aff64ef5e188ba8$export$d135ba0f748ea966));\n            questionDiv.addEventListener('drop', (0, $7aff64ef5e188ba8$export$663103110d94aac9));\n            questionDiv.addEventListener('dragleave', (0, $7aff64ef5e188ba8$export$36a4333af4a247f5));\n            questionDiv.addEventListener('dragend', (0, $7aff64ef5e188ba8$export$5d38b0bd4bef40ba));\n            answers[index].map((a, index)=>{\n                const answersDiv = document.getElementById(`${questionId}-answers`);\n                const questionType = document.querySelector(`#${questionId} select`).value;\n                if (questionType === 'text') {\n                    if (answersDiv.children.length === 0) {\n                        const input = document.createElement('input');\n                        input.type = 'text';\n                        input.name = 'text-answer';\n                        input.value = a.answer;\n                        input.placeholder = \"\\u041F\\u0440\\u0430\\u0432\\u0438\\u043B\\u044C\\u043D\\u0430 \\u0432\\u0456\\u0434\\u043F\\u043E\\u0432\\u0456\\u0434\\u044C\";\n                        answersDiv.appendChild(input);\n                    }\n                    return;\n                }\n                const answerDiv = document.createElement('div');\n                answerDiv.classList.add('answer');\n                let inputType = questionType === 'single' ? 'radio' : 'checkbox';\n                answerDiv.innerHTML = `\n            <label>\n                <input type=\"text\" value=\"${a.answer}\" name=\"answer\" class=\"answer-input\" placeholder=\"\\u{412}\\u{430}\\u{440}\\u{456}\\u{430}\\u{43D}\\u{442}\">\n                <input type=\"${inputType}\" class=\"correct-answer\" name=\"correct\" ${a.is_right === 'true' ? 'checked' : ''}> <span>\\u{41F}\\u{440}\\u{430}\\u{432}\\u{438}\\u{43B}\\u{44C}\\u{43D}\\u{430} \\u{432}\\u{456}\\u{434}\\u{43F}\\u{43E}\\u{432}\\u{456}\\u{434}\\u{44C}</span>\n            </label>\n            <button class=\"remove-question\" onclick=\"this.parentElement.remove()\">\\u{412}\\u{438}\\u{434}\\u{430}\\u{43B}\\u{438}\\u{442}\\u{438}</button>\n        `;\n                answersDiv.appendChild(answerDiv);\n            });\n        });\n    };\n    initEdit();\n    document.getElementById('add-question-btn').addEventListener('click', ()=>{\n        addQuestion();\n        questionCount++;\n        (0, $7aff64ef5e188ba8$export$25cf296777a7483d)();\n    });\n    document.getElementById('add-test-btn').addEventListener('click', async ()=>{\n        // await updateTest(test.id);\n        console.log(\"\\u043E\\u0431\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0443\\u0448\\u043B\\u043E \\u043D\\u0430 \\u043E\\u0431\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435...\");\n    });\n})();\n\n})();\n//# sourceMappingURL=edit.9987653a.js.map\n","import { supabase } from '../src/server/supabase';\n\nexport const loadAnswersToQuestions = async id => {\n  const { data, error } = await supabase\n    .from('answers')\n    .select('question_id,answer, id, is_right')\n    .eq('question_id', id);\n\n  if (error) {\n    throw new Error(error.message);\n  }\n\n  return data;\n};\n","import { supabase } from '../src/server/supabase';\n\nexport const loadQuestionsToTest = async id => {\n  const { data, error } = await supabase\n    .from('questions')\n    .select('*')\n    .eq('test_id', id);\n\n  if (error) {\n    throw new Error(error.message);\n  }\n\n  return data;\n};\n","import { getTestById } from '../funcs/getTestById';\nimport { loadAnswersToQuestions } from '../funcs/loadAnswersToQuestions';\nimport { loadQuestionsToTest } from '../funcs/loadQuestionsToTest';\nwindow.removeImage = removeImage;\nwindow.addAnswer = addAnswer;\nwindow.updateAnswerType = updateAnswerType;\nwindow.previewImage = previewImage;\nwindow.updateQuestionNumbers = updateQuestionNumbers;\nwindow.dragEnd = dragEnd;\nwindow.dragLeave = dragLeave;\nwindow.dragOver = dragOver;\nwindow.dragStart = dragStart;\nwindow.drop = drop;\nwindow.draggedItem = draggedItem;\nimport {\n  previewImage,\n  removeImage,\n  updateAnswerType,\n  updateQuestionNumbers,\n  addAnswer,\n  dragEnd,\n  dragLeave,\n  dragOver,\n  dragStart,\n  draggedItem,\n  drop,\n} from '../funcs/manageTests';\n\n(async () => {\n  const params = new URLSearchParams(document.location.search);\n  const id = params.get('test_id');\n\n  const test = await getTestById(id);\n\n  if (!test) {\n    document.title = 'Нічого не знайдено';\n    document.querySelector('.container').innerHTML = `\n      <div>\n        <a class=\"rollback\" href=\"/\">Повернутися назад</a>\n        <h1>На жаль такого тесту ще не існує 🐷</h1>\n      </div>\n    `;\n    return;\n  }\n\n  const questions = await loadQuestionsToTest(id);\n\n  if (!questions) {\n    document.title = 'Непередбачена помилка';\n    document.querySelector('.container').innerHTML = `\n      <div>\n        <a class=\"rollback\" href=\"/\">Повернутися назад</a>\n        <h1>До цього тесту не було знайдено данних, спробуйте пізніше 🐷</h1>\n      </div>\n    `;\n  }\n\n  const answers = await Promise.all(\n    questions.map(async question => await loadAnswersToQuestions(question.id))\n  );\n\n  let questionCount = questions.length;\n\n\n  window.removeElement = function removeElement(id) {\n    const element = document.getElementById(id);\n    if (element) {\n      element.remove();\n      questionCount--;\n      updateQuestionNumbers();\n    }\n  }\n\n  window.removeImage = function removeImage(questionId) {\n    const container = document.getElementById(questionId);\n    console.log(questionId)\n    const fileInput = container.querySelector(`input[type=\"file\"]`);\n  \n    if (fileInput) {\n      fileInput.value = null;\n    }\n  \n    const imagePreview = container.querySelector(`.image-preview`);\n    if (imagePreview) {\n      imagePreview.innerHTML = '';\n    }\n  }\n\n  function addQuestion() {\n    questionCount++;\n    let questionId = `question-${questionCount}`;\n\n    const questionDiv = document.createElement('div');\n    questionDiv.classList.add('question');\n    questionDiv.setAttribute('id', questionId);\n    questionDiv.setAttribute('draggable', true);\n\n    questionDiv.innerHTML = `\n            <div class=\"question-header\">\n                <span class=\"drag-handle\">☰</span>\n                <label><span class=\"question-title\">Питання ${questionCount}:</span> \n                    <input type=\"text\" id=\"question-title\" name=\"question\" placeholder=\"Введіть питання\">\n                </label>\n                <label>Тип: \n                    <select id=\"question-type\" onchange=\"updateAnswerType('${questionId}', this)\">\n                        <option value=\"text\">Текст</option>\n                        <option value=\"single\">Один варіант</option>\n                        <option value=\"multiple\">Кілька варіантів</option>\n                    </select>\n                </label>\n                <button onclick=\"removeElement('${questionId}')\">Видалити</button>\n            </div>\n    \n            <div class=\"image-upload\">\n                <input type=\"file\" accept=\"image/*\" onchange=\"previewImage(event, '${questionId}')\">\n                <div class=\"image-preview\" id=\"${questionId}-image-preview\"></div>\n            </div>\n    \n            <div class=\"answers\" id=\"${questionId}-answers\"></div>\n            <button class=\"add-answer\" onclick=\"addAnswer('${questionId}')\">Додати відповідь</button> \n        `;\n\n    document.getElementById('questions-container').appendChild(questionDiv);\n\n    questionDiv.addEventListener('dragstart', dragStart);\n    questionDiv.addEventListener('dragover', dragOver);\n    questionDiv.addEventListener('drop', drop);\n    questionDiv.addEventListener('dragleave', dragLeave);\n    questionDiv.addEventListener('dragend', dragEnd);\n  }\n  const initEdit = async () => {\n    document.title = `Редагування - ${test.title}`;\n\n    document.querySelector('.container').innerHTML = `\n      <a class=\"rollback\" href=\"/\">На головну</a>\n      <div class=\"quiz-container\">\n        <h2>Редагувати тест - ${test.title}</h2>\n        <div class=\"test-content\">\n          <label\n            >Назва тесту:\n            <input\n              required\n              type=\"text\"\n              id=\"test-title\"\n              placeholder=\"Введіть назву тесту\"\n              value=\"${test.title}\"\n            />\n          </label>\n          <label\n            >Опис тесту:\n            <textarea\n              id=\"test-description\"\n              placeholder=\"Введіть опис тесту\"\n            >${test.description}</textarea>\n          </label>\n        </div>\n        <div id=\"questions-container\"></div>\n        <div id=\"button-wrapper\">\n          <button class=\"add-question\" id=\"add-question-btn\">\n            Додати питання\n          </button>\n          <button class=\"make-test\" id=\"add-test-btn\">Оновити тест</button>\n        </div>\n      </div>\n  `;\n    questions.map((question, index) => {\n      const questionDiv = document.createElement('div');\n      let questionId = `question-${index + 1}`;\n\n      questionDiv.classList.add('question');\n      questionDiv.dataset.id = question.id;\n      questionDiv.setAttribute('id', `${questionId}`);\n      questionDiv.setAttribute('draggable', true);\n\n      questionDiv.innerHTML = `\n      <div class=\"question-header\">\n              <span class=\"drag-handle\">☰</span>\n              <label><span class=\"question-title\">Питання ${index + 1}:</span> \n                  <input type=\"text\" id=\"question-title\" name=\"question\" value=\"${\n                    question.question\n                  }\" placeholder=\"Введіть питання\">\n              </label>\n              <label>Тип: \n                  <select id=\"question-type\" onchange=\"updateAnswerType('${questionId}', this)\">\n                      <option value=\"text\" ${\n                        question.type === 'text' ? 'selected' : ''\n                      }>Текст</option>\n                      <option value=\"single\" ${\n                        question.type === 'single' ? 'selected' : ''\n                      }>Один варіант</option>\n                      <option value=\"multiple\" ${\n                        question.type === 'multiple' ? 'selected' : ''\n                      }>Кілька варіантів</option>\n                  </select>\n              </label>\n              <button onclick=\"removeElement('${questionId}')\">Видалити</button>\n          </div>\n  \n          <div class=\"image-upload\">\n              <input type=\"file\" accept=\"image/*\" onchange=\"previewImage(event, '${questionId}')\">\n              <div class=\"image-preview\" id=\"${questionId}-image-preview\">\n                ${\n                  question.image_url\n                    ? `<div class=\"image-wrapper\">\n              <img src=\"${question.image_url}\">\n              <button class=\"delete-image\" onclick=\"removeImage('${questionId}')\">×</button>\n            </div>`\n                    : ''\n                }\n              </div>\n          </div>\n  \n          <div class=\"answers\" id=\"${questionId}-answers\"></div>\n          <button class=\"add-answer\" onclick=\"addAnswer('${questionId}')\">Додати відповідь</button>\n    `;\n      document.getElementById('questions-container').appendChild(questionDiv);\n      questionDiv.addEventListener('dragstart', dragStart);\n      questionDiv.addEventListener('dragover', dragOver);\n      questionDiv.addEventListener('drop', drop);\n      questionDiv.addEventListener('dragleave', dragLeave);\n      questionDiv.addEventListener('dragend', dragEnd);\n      answers[index].map((a, index) => {\n        const answersDiv = document.getElementById(`${questionId}-answers`);\n        const questionType = document.querySelector(\n          `#${questionId} select`\n        ).value;\n\n        if (questionType === 'text') {\n          if (answersDiv.children.length === 0) {\n            const input = document.createElement('input');\n            input.type = 'text';\n            input.name = 'text-answer';\n            input.value = a.answer;\n            input.placeholder = 'Правильна відповідь';\n            answersDiv.appendChild(input);\n          }\n          return;\n        }\n\n        const answerDiv = document.createElement('div');\n        answerDiv.classList.add('answer');\n\n        let inputType = questionType === 'single' ? 'radio' : 'checkbox';\n        answerDiv.innerHTML = `\n            <label>\n                <input type=\"text\" value=\"${\n                  a.answer\n                }\" name=\"answer\" class=\"answer-input\" placeholder=\"Варіант\">\n                <input type=\"${inputType}\" class=\"correct-answer\" name=\"correct\" ${\n          a.is_right === 'true' ? 'checked' : ''\n        }> <span>Правильна відповідь</span>\n            </label>\n            <button class=\"remove-question\" onclick=\"this.parentElement.remove()\">Видалити</button>\n        `;\n        answersDiv.appendChild(answerDiv);\n      });\n    });\n  };\n\n  initEdit();\n  document.getElementById('add-question-btn').addEventListener('click', () => {\n    addQuestion();\n    questionCount++;\n    updateQuestionNumbers();\n  });\n  document\n    .getElementById('add-test-btn')\n    .addEventListener('click', async () => {\n      // await updateTest(test.id);\n      console.log('обновление ушло на обновление...');\n    });\n})();\n","import { supabase } from '../src/server/supabase';\n\nexport const getTestById = async id => {\n  try {\n    const { data, error } = await supabase\n      .from('tests')\n      .select('*')\n      .eq('id', id);\n\n    if (error) {\n      throw new Error(error.message);\n    }\n\n    return data[0];\n  } catch (error) {\n    return error;\n  }\n};\n","export function removeImage(questionId) {\n  const container = document.getElementById(questionId);\n\n  const fileInput = container.querySelector('input[type=\"file\"]');\n\n  if (fileInput) {\n    fileInput.value = null;\n  }\n\n  const imagePreview = container.querySelector('.image-preview');\n  if (imagePreview) {\n    imagePreview.innerHTML = '';\n  }\n}\n\nexport function addAnswer(questionId) {\n  const answersDiv = document.getElementById(`${questionId}-answers`);\n  const questionElement = document.getElementById(questionId);\n\n  if (!questionElement) {\n    return;\n  }\n\n  const questionType = questionElement.querySelector('select').value;\n\n  if (questionType === 'text') {\n    if (answersDiv.children.length === 0) {\n      const input = document.createElement('input');\n      input.type = 'text';\n      input.name = `text-answer`;\n      input.placeholder = 'Правильна відповідь';\n      answersDiv.appendChild(input);\n    }\n    return;\n  }\n\n  const answerDiv = document.createElement('div');\n  answerDiv.classList.add('answer');\n\n  let inputType = questionType === 'single' ? 'radio' : 'checkbox';\n  answerDiv.innerHTML = `\n      <label>\n          <input type=\"text\" name=\"answer\" class=\"answer-input\" placeholder=\"Варіант\">\n          <input type=\"${inputType}\" class=\"correct-answer\" name=\"correct-${questionId}\">\n          <span>Правильна відповідь</span>\n      </label>\n      <button class=\"remove-question\" onclick=\"this.parentElement.remove()\">Видалити</button>\n  `;\n\n  answersDiv.appendChild(answerDiv);\n}\n\nexport function updateAnswerType(questionId, selectElement) {\n  const answersDiv = document.getElementById(`${questionId}-answers`);\n  answersDiv.innerHTML = '';\n}\n\nexport function removeElement(id) {\n  const element = document.getElementById(id);\n  if (element) {\n    element.remove();\n    questionCount--;\n    updateQuestionNumbers();\n  }\n}\n\nexport function previewImage(event, questionId) {\n  const file = event.target.files[0];\n  if (file) {\n    const reader = new FileReader();\n    reader.onload = function (e) {\n      const previewContainer = document.getElementById(\n        `${questionId}-image-preview`\n      );\n      previewContainer.innerHTML = `\n            <div class=\"image-wrapper\">\n              <img src=\"${e.target.result}\" alt=\"Зображення\">\n              <button class=\"delete-image\" onclick=\"removeImage('${questionId}')\">×</button>\n            </div>\n          `;\n    };\n    reader.readAsDataURL(file);\n  }\n}\n\nexport function updateQuestionNumbers() {\n  document.querySelectorAll('.question').forEach((question, index) => {\n    const newId = `question-${index + 1}`;\n    question.setAttribute('id', newId);\n\n    question.querySelector('.question-title').innerText = `Питання ${\n      index + 1\n    }:`;\n\n    const select = question.querySelector('select');\n    select.setAttribute('onchange', `updateAnswerType('${newId}', this)`);\n\n    const answerDiv = question.querySelector('.answers');\n    answerDiv.setAttribute('id', `${newId}-answers`);\n\n    const addAnswerBtn = question.querySelector('.add-answer');\n    addAnswerBtn.setAttribute('onclick', `addAnswer('${newId}')`);\n\n    const deleteBtn = question.querySelector(\n      'button[onclick^=\"removeElement\"]'\n    );\n    deleteBtn.setAttribute('onclick', `removeElement('${newId}')`);\n\n    question.querySelectorAll('.correct-answer').forEach(input => {\n      input.name = `correct-${newId}`;\n    });\n  });\n}\n\nexport let draggedItem = null;\n\nexport function dragStart(event) {\n  draggedItem = event.target;\n  originalPosition = draggedItem.nextSibling;\n  event.target.classList.add('dragging');\n}\n\nexport function dragOver(event) {\n  event.preventDefault();\n  const target = event.target.closest('.question');\n  const container = document.getElementById('questions-container');\n\n  if (target && target !== draggedItem && container.contains(target)) {\n    const children = Array.from(container.children);\n    const draggedIndex = children.indexOf(draggedItem);\n    const targetIndex = children.indexOf(target);\n\n    if (draggedIndex > targetIndex) {\n      container.insertBefore(draggedItem, target);\n    } else {\n      container.insertBefore(draggedItem, target.nextSibling);\n    }\n  }\n}\n\nexport function drop(event) {\n  event.preventDefault();\n  draggedItem.classList.remove('dragging');\n}\n\nexport function dragLeave(event) {\n  event.target.closest('.question')?.classList.remove('drag-over');\n}\n\nexport function dragEnd() {\n  const container = document.getElementById('questions-container');\n  if (!container.contains(draggedItem)) {\n    originalPosition\n      ? originalPosition.parentNode.insertBefore(draggedItem, originalPosition)\n      : container.appendChild(draggedItem);\n  }\n  draggedItem.classList.remove('dragging');\n  draggedItem = null;\n  updateQuestionNumbers();\n}\n"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","parcelRegister","$c51ab5d54aaa30b2$export$7a30e8c3b909984b","$7ZMNl","data","error","supabase","from","select","eq","message","$6d7041d98d88f3fe$export$de5889d48e25167b","$e35179d877a16811$export$4d7fb8ef9268b219","$gVbgG","$9oxol","$7aff64ef5e188ba8$export$25cf296777a7483d","document","querySelectorAll","forEach","question","index","newId","setAttribute","querySelector","innerText","answerDiv","addAnswerBtn","deleteBtn","input","name","$7aff64ef5e188ba8$export$6aa807c2160bede3","$7aff64ef5e188ba8$export$c34730c351bf3a09","event","originalPosition","target","nextSibling","classList","add","$7aff64ef5e188ba8$export$d135ba0f748ea966","preventDefault","closest","container","getElementById","contains","children","Array","draggedIndex","indexOf","insertBefore","$7aff64ef5e188ba8$export$663103110d94aac9","remove","$7aff64ef5e188ba8$export$36a4333af4a247f5","$7aff64ef5e188ba8$export$5d38b0bd4bef40ba","parentNode","appendChild","removeImage","questionId","fileInput","value","imagePreview","innerHTML","addAnswer","answersDiv","questionElement","questionType","length","createElement","type","placeholder","updateAnswerType","selectElement","previewImage","file","files","reader","FileReader","onload","previewContainer","result","readAsDataURL","updateQuestionNumbers","dragEnd","dragLeave","dragOver","dragStart","drop","draggedItem","params","URLSearchParams","location","search","test","title","questions","loadQuestionsToTest","answers","Promise","all","map","loadAnswersToQuestions","questionCount","removeElement","element","console","log","initEdit","description","questionDiv","dataset","image_url","addEventListener","a","answer","is_right","addQuestion"],"version":3,"file":"edit.9987653a.js.map"}